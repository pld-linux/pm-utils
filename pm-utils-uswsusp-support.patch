diff -urN pm-utils-0.99.4/pm/defaults pm-utils-0.99.4.new/pm/defaults
--- pm-utils-0.99.4/pm/defaults	2007-03-14 16:27:21.000000000 +0100
+++ pm-utils-0.99.4.new/pm/defaults	2007-11-07 16:22:38.000000000 +0100
@@ -1,4 +1,3 @@
-
 ##########################################################
 # DO NOT EDIT THIS FILE, edit /etc/pm/config.d/ instead! #
 ##########################################################
@@ -7,3 +6,13 @@
 
 SUSPEND_MODULES=""
 
+# HIBERNATE_METHOD specifies which method should be used
+# for suspend to disk. Allowed are two values "kernel" and
+# "userspace" (autodetect by default)
+HIBERNATE_METHOD=""
+
+# SUSPEND_METHOD specifies which method should be used
+# for suspend to ram. Allowed are two values "kernel" and
+# "userspace" (autodetect by default)
+SUSPEND_METHOD=""
+
diff -urN pm-utils-0.99.4/pm/functions pm-utils-0.99.4.new/pm/functions
--- pm-utils-0.99.4/pm/functions	2007-05-15 16:55:58.000000000 +0200
+++ pm-utils-0.99.4.new/pm/functions	2007-11-07 16:32:33.000000000 +0100
@@ -12,6 +12,8 @@
 HIBERNATE_RESUME_POST_VIDEO=no
 INHIBIT=/var/run/pm-utils.inhibit
 PM_LOGFILE=${PM_LOGFILE:=/var/log/pm-suspend.log}
+HIBERNATE_METHOD=""
+SUSPEND_METHOD=""
 SUSPEND_MODULES=""
 TEMPORARY_CPUFREQ_GOVERNOR="userspace"
 
@@ -120,13 +122,49 @@
 
 do_suspend()
 {
-	pm-pmu --suspend || echo -n "mem" > /sys/power/state
+	if [ -z "$SUSPEND_METHOD" ]; then
+		if [ -x /usr/sbin/s2ram ]; then
+			SUSPEND_METHOD="userspace"
+		else
+			SUSPEND_METHOD="kernel"
+		fi
+	fi
+	case "$SUSPEND_METHOD" in
+		"kernel")
+			pm-pmu --suspend || echo -n "mem" > /sys/power/state
+			;;
+		"userspace")
+			if [ ! -x /usr/sbin/s2ram ]; then
+				echo "$(date) ERROR: /usr/sbin/s2ram not found!"
+				return 1
+			fi
+			/usr/sbin/s2ram
+			;;
+	esac
 }
 
 do_hibernate()
 {
-	echo -n "platform" > /sys/power/disk
-	echo -n "disk" > /sys/power/state
+	if [ -z "$HIBERNATE_METHOD" ]; then
+		if [ -x /usr/sbin/s2disk -a -c /dev/snapshot ]; then
+			HIBERNATE_METHOD="userspace"
+		else
+			HIBERNATE_METHOD="kernel"
+		fi
+	fi
+	case "$HIBERNATE_METHOD" in
+		"kernel")
+			echo -n "platform" > /sys/power/disk
+			echo -n "disk" > /sys/power/state
+			;;
+		"userspace")
+			if [ ! -x /usr/sbin/s2disk -o ! -c /dev/snapshot ]; then
+				echo "$(date) ERROR: /usr/sbin/s2disk or /dev/snapshot not found!"
+				return 1
+			fi
+			/usr/sbin/s2disk
+			;;
+	esac
 }
 
 do_suspend_hybrid()
